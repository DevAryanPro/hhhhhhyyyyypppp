<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MiniApp Settings</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="margin:0;background:rgb(51,51,51);color:white;font-family:sans-serif;padding:20px;">

  <h2>Settings</h2>

  <section>
    <label>Theme</label>
    <select id="theme">
      <option value="bg_color">Default</option>
      <option value="secondary_bg_color" selected>Dark</option>
    </select>
  </section>

  <section>
    <label>Notifications</label>
    <select id="notifications">
      <option value="all">All</option>
      <option value="mentions">Mentions only</option>
      <option value="none">None</option>
    </select>
  </section>

  <section>
    <label>Feedback</label>
    <textarea id="feedback" rows="4" style="width:100%;background:#333;color:white;border:none;padding:10px;border-radius:4px;"></textarea>
  </section>

<script>
const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

function updateHeader() {
  tg.setHeaderColor(document.getElementById("theme").value);
}
document.getElementById("theme").addEventListener("change", updateHeader);
updateHeader();

tg.BackButton.show();
tg.BackButton.onClick(() => tg.close());

tg.MainButton.setText("Save");
tg.MainButton.show();
tg.MainButton.onClick(() => {
  const data = {
    theme: document.getElementById("theme").value,
    notifications: document.getElementById("notifications").value,
    feedback: document.getElementById("feedback").value
  };
  tg.sendData(JSON.stringify(data));
});
</script>
</body>
</html>
